# ExperimentTable.vue 使用指南

## 组件概述

ExperimentTable.vue 是一个实验数据可视化系统组件，基于 Vue 3 + TypeScript + Ant Design Vue 开发，支持数据导入、筛选分析和多格式导出功能。

## 主要功能

### 1. 数据操作
- **读取CSV**: 输入 GitHub raw CSV URL 或上传本地 CSV 文件
- **合并数据**: 支持多次上传并自动合并重复数据
- **导出功能**: 支持导出为 CSV、Excel 和 LaTeX 格式

### 2. 数据筛选
- **模型筛选**: 多选模型进行数据过滤
- **数据集筛选**: 多选数据集进行数据过滤
- **清空筛选**: 一键清除所有筛选条件

### 3. 透视可视化
- **拖拽排序**: 支持拖拽调整模型显示顺序
- **智能高亮**: 自动标记最优值（红色加粗）和次优值（蓝色下划线）
- **数据分组**: 按数据集和输出长度分组显示

### 4. 原始数据展示
- **分页显示**: 支持分页浏览原始数据
- **数值格式化**: 自动格式化数值显示

## 使用方法

### 基本使用流程

1. **加载数据**
   - 在 "数据操作" 区域输入 CSV URL 或上传 CSV 文件
   - 点击 "读取CSV" 或 "上传并合并CSV" 按钮

2. **数据筛选**
   - 在 "数据筛选" 区域选择需要查看的模型和数据集
   - 使用多选下拉框进行精确筛选
   - 点击 "清空筛选" 重置筛选条件

3. **查看数据**
   - 在 "透视可视化" 区域查看格式化后的数据
   - 拖拽模型标题调整显示顺序
   - 在 "原始数据展示" 区域查看完整数据表格

4. **导出数据**
   - 点击相应按钮导出为 CSV、Excel 或 LaTeX 格式
   - LaTeX 导出会生成可直接使用的表格代码

### 数据格式要求

CSV 文件应包含以下列：
- `model`: 模型名称（字符串）
- `dataset`: 数据集名称（字符串）
- `output_len`: 输出长度（数值）
- `mse`: 均方误差（数值）
- `mae`: 平均绝对误差（数值）

示例 CSV 格式：
```csv
model,dataset,output_len,mse,mae
ModelA,Dataset1,10,0.123,0.456
ModelB,Dataset1,10,0.234,0.567
ModelA,Dataset2,20,0.345,0.678
```

## 技术特性

### 技术栈
- **框架**: Vue 3 + TypeScript
- **UI组件**: Ant Design Vue
- **表格处理**: PapaParse (CSV解析)
- **Excel导出**: SheetJS (XLSX)
- **拖拽功能**: vuedraggable

### 核心功能
- 响应式设计，支持各种屏幕尺寸
- 实时数据筛选和排序
- 智能数值格式化和高亮
- 多格式数据导出
- 错误处理和用户反馈

## 组件结构

```
ExperimentTable.vue
├── 模板部分 (Template)
│   ├── 页面标题和说明
│   ├── 数据操作区域（导入/导出按钮）
│   ├── 数据筛选区域（模型/数据集筛选）
│   ├── 透视可视化表格（拖拽排序+高亮显示）
│   └── 原始数据表格（分页显示）
├── 脚本部分 (Script)
│   ├── 响应式数据定义
│   ├── 计算属性（筛选、排序、格式化）
│   ├── 方法函数（数据操作、导出功能）
│   └── 生命周期和监听器
└── 样式部分 (Style)
    └── 自定义CSS样式
```

## API 参考

### Props
无外部 props，组件完全自包含

### 事件
无外部事件发射

### 方法
组件内部方法，主要通过 UI 交互调用

## 使用示例

### 基本使用
```vue
<template>
  <ExperimentTable />
</template>

<script setup>
import ExperimentTable from './components/ExperimentTable.vue'
</script>
```

### 自定义样式
可以通过修改 `ExperimentTable.vue.css` 文件来自定义组件样式。

## 注意事项

1. **数据安全**: 组件仅处理前端数据，不涉及后端通信
2. **文件大小**: 建议 CSV 文件大小不超过 10MB
3. **浏览器兼容**: 支持现代浏览器（Chrome、Firefox、Safari、Edge）
4. **移动端**: 支持移动端触摸操作，但建议在桌面端使用以获得最佳体验

## 故障排除

### 常见问题

1. **CSV 读取失败**
   - 检查 URL 是否正确（需要 raw GitHub URL）
   - 确认 CSV 格式符合要求
   - 检查网络连接

2. **数据不显示**
   - 确认筛选条件是否正确
   - 检查数据格式是否符合要求
   - 查看浏览器控制台是否有错误信息

3. **导出功能异常**
   - 确认浏览器支持相关 API
   - 检查是否有弹出窗口被阻止

## 更新日志

### v1.0.0
- 初始版本发布
- 支持 CSV 导入/导出
- 支持 Excel 导出
- 支持 LaTeX 导出
- 拖拽排序功能
- 智能数据高亮

## 技术支持

如有问题或建议，请提交 Issue 或联系开发团队。